<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Figboard</title>
    <style>
      label {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
      }

      label > p,
      label > button {
        border: 1px solid black;
        padding: 10px;
      }
      body {
        background-color: #111;
        color: #0f0;
        font-family: monospace;
      }

      button {
        background-color: #222;
        color: #0f0;
        border: 1px solid #0f0;
        cursor: pointer;
      }

      button:disabled {
        opacity: 0.5;
      }
    </style>
  </head>

  <body>
    <!-- TODO: Make Dashboard Status a navbar-->
    <section>
      <h3>Status:</h3>
      <h4 id="appStatusArea">Idle</h4>
      <button onclick="statusRun()">Start Process</button>
    </section>
    <!-- TODO: Make Dashboard Logging a aside element-->
    <section>
      <h3>The Log:</h3>
      <h4 id="logsArea"></h4>
      <button onclick="makeLogs()">Log It</button>
    </section>

    <!-- Control Panel-->
    <section>
      <header>
        <h3>Control Panel</h3>
      </header>
      <button id="scanButton" onclick="startScan()">Start Scan:</button>
      <p id="scanStatusArea"></p>
      <button id="getBackup" onclick="getBackup()">Back it Up:</button>
      <p id="backupStatusArea"></p>
      <button id="emergencyButton" onclick="emergencyButton()">
        EMERGENCY BUTTON:
      </button>
      <p id="emergencyStatusArea"></p>
    </section>

    <!--Backend Piping-->
    <section>
      <header><h3>From the Kitchen:</h3></header>
      <p id="backendDisplay"></p>
      <button id="backendButton">WAITER</button>
    </section>

    <section>
      <header><h3>Get Today's Files</h3></header>
      <button id="radioManButton"><h4>RELEASE THE FILES</h4></button>
    </section>
  </body>
  <!-- Mock Backend -->
  <script src="mockbackend.js"></script>
  <script src="createFile.js"></script>
  <script>
    function getRandomStatus() {
      const statuses = ["Okay", "Not Good", "Bad", "CATASTROPHE"];
      return statuses[Math.floor(Math.random() * statuses.length)];
    }
    function statusRun() {
      const statusLabel = document.querySelector("#appStatusArea");
      try {
        statusLabel.innerText = "Running";
        setTimeout(() => {
          statusLabel.innerText = "Done!";
        }, 3000);
      } catch (error) {
        alert(error);
      }
    }

    let logNumber = 0;
    function makeLogs() {
      const logArea = document.querySelector("#logsArea");
      const logOneElement = document.createElement("p");
      logNumber += 1;
      const logOne = document.createTextNode(`Log ${logNumber}`);
      logOneElement.appendChild(logOne);
      logArea.appendChild(logOneElement);

      if (logNumber <= 4) {
        setTimeout(makeLogs, 5000);
      }
    }

    // Control Panel
    function startScan() {
      const startScanArea = document.querySelector("#scanStatusArea");

      startScanArea.innerText = getRandomStatus();
    }
    function getBackup() {
      const getBackupArea = document.querySelector("#backupStatusArea");

      getBackupArea.innerText = getRandomStatus();
    }
    function emergencyButton() {
      const emergencyStatusArea = document.querySelector(
        "#emergencyStatusArea",
      );
      let currentStatus = getRandomStatus();
      if (currentStatus == "CATASTROPHE") {
        emergencyStatusArea.style.cssText = "color:white;background-color:red";
        emergencyStatusArea.innerText = currentStatus;
      } else {
        emergencyStatusArea.style.cssText = "";
        emergencyStatusArea.innerText = currentStatus;
      }
    }
  </script>
</html>
